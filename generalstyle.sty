\usepackage{xparse} % defining certain macros
\usepackage{microtype}  % better typography
\usepackage{enumitem} % better list type environments
\usepackage{csquotes} % quotes
\usepackage{amsmath, amssymb, amsthm, mathtools} % smath stuff
\usepackage{stmaryrd} % (long)mapsfrom
\usepackage{extarrows} % xlongrightarrow
\usepackage{bbm}
\usepackage{tikz-cd}
\usepackage{hyperref}
\usepackage[capitalise,noabbrev]{cleveref}  % smarter referencing, load after hyperref


% prevents breaking inline math around binary or relationship symbols
\binoppenalty=\maxdimen
\relpenalty=\maxdimen


% colours for hyperref
\hypersetup{
    colorlinks,
    linkcolor={green!35!black},
    citecolor={blue!50!black},
    urlcolor={blue!80!black}
}


% fonts for titlepage
\setkomafont{publishers}{\normalsize}

% settings for list like environments
\setlist[description, 1]{leftmargin=\labelwidth, font=\normalfont}
\setlist[enumerate, 1]{leftmargin=*, align=left, label=\arabic*)}
\setlist[itemize, 1]{leftmargin=*}
\setlist[itemize, 2]{leftmargin=*, label={\textopenbullet}}


% redefine how counters are printed
\setcounter{secnumdepth}{2}
\renewcommand{\thesection}{Exercise \arabic{section}.}
\renewcommand{\thesubsection}{(\alph{subsection})}


% define theorem like environments
\newcounter{everything}
\theoremstyle{definition}
\newtheorem{corollary}[everything]{Corollary}
\newtheorem{definition}[everything]{Definition}
\newtheorem{example}[everything]{Example}
\newtheorem{lemma}[everything]{Lemma}
\newtheorem{recall}[everything]{Recall}
\newtheorem{proposition}[everything]{Proposition}
\newtheorem{remark}[everything]{Remark}
\newtheorem{theorem}[everything]{Theorem}
\newtheorem{warning}[everything]{Warning}


% text shortcuts
\newcommand{\dash}[2]{#1\nobreakdash-#2}
\newcommand{\fd}{finite\nobreakdash-dimensional}
\newcommand{\kalg}{$k$\nobreakdash-algebra}
\newcommand{\kalgs}{$k$\nobreakdash-algebras}
\newcommand{\kbasis}{$k$\nobreakdash-basis}
\newcommand{\kbil}{$k$\nobreakdash-bilinear}
\newcommand{\klin}{$k$\nobreakdash-linear}
\newcommand{\kvs}{$k$\nobreakdash-vector space}
\newcommand{\onetoone}{one\nobreakdash-to\nobreakdash-one}
\newcommand{\pbw}{Poincar√©--Birkhoff--Witt}
\newcommand{\twosided}{two\nobreakdash-sided}
\newcommand{\welldef}{well\nobreakdash-defined}
\NewDocumentCommand{\module}{m o}{%
  \IfNoValueTF{#2}{{#1}\nobreakdash-module}
                  {{#1}\nobreakdash-{#2}\nobreakdash-bimodule}%
}
\NewDocumentCommand{\modules}{m o}{%
  \IfNoValueTF{#2}{{#1}\nobreakdash-modules}
                  {{#1}\nobreakdash-{#2}\nobreakdash-bimodules}%
}
\NewDocumentCommand{\submodule}{m o}{%
  \IfNoValueTF{#2}{{#1}\nobreakdash-submodule}
                  {{#1}\nobreakdash-{#2}\nobreakdash-bisubmodule}%
}
\NewDocumentCommand{\submodules}{m o}{%
  \IfNoValueTF{#2}{{#1}\nobreakdash-submodules}
                  {{#1}\nobreakdash-{#2}\nobreakdash-bisubmodules}%
}


% math shortcuts
\newcommand{\Fcal}{\mathcal{F}}
\newcommand{\inclusion}{\hookrightarrow}
\newcommand{\longto}{\longrightarrow}
\newcommand{\vect}[1]{\begin{bmatrix} #1 \end{bmatrix}}
\newcommand{\xlongto}{\xlongrightarrow}
\newcommand{\xto}{\xrightarrow}


% relations
\newcommand{\defined}{\coloneqq}
\newcommand{\defines}{\eqqcolon}
\newcommand{\longequal}{=\!=}
\newcommand{\tensor}{\otimes}


% important sets
\newcommand{\Natural}{\mathbb{N}}
\newcommand{\Integer}{\mathbb{Z}}
\newcommand{\Real}{\mathbb{R}}
\newcommand{\Complex}{\mathbb{C}}
\newcommand{\Quaternion}{\mathbb{H}}


% categories
% generic macros
\newcommand{\catname}[1]{\mathbf{#1}}
\newcommand{\gencat}[1]{\mathcal{#1}}
% fixed categories
\newcommand{\kAlg}{\text{$k$-$\catname{Alg}$}}
\newcommand{\kCommAlg}{\text{$k$-$\catname{CommAlg}$}}
\newcommand{\kLie}{\text{$k$-$\catname{Lie}$}}
\newcommand{\Set}{\catname{Set}}
% generaic categories
\newcommand{\Ccat}{\gencat{C}}
\newcommand{\Dcat}{\gencat{D}}
\newcommand{\Ecat}{\gencat{E}}
\newcommand{\Fcat}{\gencat{F}}
\newcommand{\Gcat}{\gencat{G}}


% space and set constructions
\DeclareMathOperator{\gcenter}{Z}
\DeclareMathOperator{\End}{End}
\newcommand{\Exterior}{\bigwedge}
\DeclarePairedDelimiter{\gen}{\langle}{\rangle}
\DeclarePairedDelimiter{\genideal}{(}{)}
\DeclareMathOperator{\GL}{GL}
\DeclareMathOperator{\gr}{gr}
\DeclareMathOperator{\Hom}{Hom}
\DeclareMathOperator{\im}{im}
\DeclareMathOperator{\Jac}{J}
\newcommand{\mat}[2]{\operatorname{M}_{#1}(#2)}
\newcommand{\mnat}[3]{\operatorname{M}(#1 \times #2, #3)}
\newcommand{\Pol}{\mathcal{P}}
\DeclareMathOperator{\rad}{rad}
\DeclareMathOperator{\SL}{SL}
\DeclareMathOperator{\SO}{SO}
\newcommand{\sphere}{\mathbb{S}}
\DeclareMathOperator{\Stab}{Stab}
\DeclareMathOperator{\Symm}{S}
\DeclareMathOperator{\Tensor}{T}


% functions and functors
\DeclarePairedDelimiter{\abs}{\lvert}{\rvert}
\DeclarePairedDelimiter{\card}{\lvert}{\rvert}
\newcommand{\id}{\operatorname{id}}
\newcommand{\Id}{\mathbbm{1}}
\DeclareMathOperator{\ringchar}{char}
\DeclareMathOperator{\sign}{sgn}
\DeclarePairedDelimiter{\size}{\lvert}{\rvert}


% decoration
\newcommand{\class}[1]{\overline{#1}}
\newcommand{\conjugate}[1]{\overline{#1}}
\newcommand{\induced}[1]{\overline{#1}}
\newcommand{\op}{\mathrm{op}}


% custom macros with case distinctions
\NewDocumentCommand{\suchthat}{s}{
  \IfBooleanTF{#1}
    {\,\middle|\,}
    {\mathrel{|}}       
}
\NewDocumentCommand{\restrict}{smmO{}}{
  \IfBooleanTF{#1}
    {\left. {#2} \,\middle|_{#3}^{#4} \right.}
    {{#2}\,|_{#3}^{#4}}
}
